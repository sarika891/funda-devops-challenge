groups:
- name: default
  rules:
    - alert: error in some queue
      expr: sum(sqs_approximatenumberofmessages{queue=~".*error.*"}) by ( queue ) > 0
      for: 2m
      labels:
         severity: critical
         team: devops
      annotations:
         summary: "queue {{ $labels.queue }} has some error"
                                                                                                
 
    - alert: Error In queue simplequeue
      expr: sum(sqs_approximatenumberofmessages{queue=~".*simplequeue*"}) by (queue) > 1
      for: 2m
      labels:
        severity: critical
        team: devops1
      annotations:
        description: '{{ $labels.queue }} has errors, needs to be checked. '
        summary: '{{ $labels.queue }} has errors, needs to be checked.'
                                                                                                
 
    - alert: Error In queue simplequeue
      expr: sum(sqs_approximatenumberofmessagesdelayed{queue=~".*simplequeue*"}) by (queue) > 1
      for: 2m
      labels:
        severity: critical
        team: devops1
      annotations:
        description: '{{ $labels.queue }} has errors, needs to be checked. '
        summary: '{{ $labels.queue }} has errors, needs to be checked.'
                                                                                                
 
    - alert: Error In queue test-devops-queue
      expr: sum(sqs_approximatenumberofmessages{queue=~".*test-devops-queue*"}) by (queue) > 1
      for: 2m
      labels:
        severity: critical
        team: devops1
      annotations:
        description: '{{ $labels.queue }} has errors, needs to be checked. '
        summary: '{{ $labels.queue }} has errors, needs to be checked.'
                                                                                                
 
    - alert: Error In queue test-devops-queue
      expr: sum(sqs_approximatenumberofmessagesdelayed{queue=~".*test-devops-queue*"}) by (queue) > 1
      for: 2m
      labels:
        severity: critical
        team: devops1
      annotations:
        description: '{{ $labels.queue }} has errors, needs to be checked. '
        summary: '{{ $labels.queue }} has errors, needs to be checked.'
                                                                                                
 
